{% extends 'base_common.html' %}

{% load static humanize i18n %}

{% block head %}
  {{ block.super }}
  <link rel="canonical" href="search"/>
  <link rel="stylesheet" href="{% static 'css/material-design-iconic-font.2.min90ca.css' %}">
  <link rel="stylesheet" href="{% static 'css/footer.min90ca.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/popup-new.min90ca.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/search-transition.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}"/>
  <style>
      @-webkit-keyframes vueContentPlaceholdersAnimation {
          0% {
              -webkit-transform: translate3d(-30%, 0, 0);
              transform: translate3d(-30%, 0, 0)
          }
          100% {
              -webkit-transform: translate3d(100%, 0, 0);
              transform: translate3d(100%, 0, 0)
          }
      }

      @keyframes vueContentPlaceholdersAnimation {
          0% {
              -webkit-transform: translate3d(-30%, 0, 0);
              transform: translate3d(-30%, 0, 0)
          }
          100% {
              -webkit-transform: translate3d(100%, 0, 0);
              transform: translate3d(100%, 0, 0)
          }
      }

      .vue-content-placeholders-heading {
          display: -webkit-box;
          display: -ms-flexbox;
          display: flex
      }

      [class^=vue-content-placeholders-] + .vue-content-placeholders-heading {
          margin-top: 20px
      }

      .vue-content-placeholders-heading__img {
          position: relative;
          overflow: hidden;
          height: 15px;
          background: #eee;
          width: 60px;
          height: 60px;
          margin-right: 15px
      }

      .vue-content-placeholders-is-rounded .vue-content-placeholders-heading__img {
          border-radius: 6px
      }

      .vue-content-placeholders-is-centered .vue-content-placeholders-heading__img {
          margin-left: auto;
          margin-right: auto
      }

      .vue-content-placeholders-is-animated .vue-content-placeholders-heading__img::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          max-width: 1000px;
          height: 100%;
          background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(15%, #e1e1e1), color-stop(30%, transparent));
          background: linear-gradient(to right, transparent 0, #e1e1e1 15%, transparent 30%);
          -webkit-animation-duration: 1.5s;
          animation-duration: 1.5s;
          -webkit-animation-fill-mode: forwards;
          animation-fill-mode: forwards;
          -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
          -webkit-animation-name: vueContentPlaceholdersAnimation;
          animation-name: vueContentPlaceholdersAnimation;
          -webkit-animation-timing-function: linear;
          animation-timing-function: linear
      }

      .vue-content-placeholders-heading__content {
          display: -webkit-box;
          display: -ms-flexbox;
          display: flex;
          -webkit-box-flex: 1;
          -ms-flex: 1;
          flex: 1;
          -webkit-box-orient: vertical;
          -webkit-box-direction: normal;
          -ms-flex-direction: column;
          flex-direction: column;
          -webkit-box-pack: center;
          -ms-flex-pack: center;
          justify-content: center
      }

      .vue-content-placeholders-heading__title {
          position: relative;
          overflow: hidden;
          height: 15px;
          background: #eee;
          width: 85%;
          margin-bottom: 10px;
          background: #ccc
      }

      .vue-content-placeholders-is-rounded .vue-content-placeholders-heading__title {
          border-radius: 6px
      }

      .vue-content-placeholders-is-centered .vue-content-placeholders-heading__title {
          margin-left: auto;
          margin-right: auto
      }

      .vue-content-placeholders-is-animated .vue-content-placeholders-heading__title::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          max-width: 1000px;
          height: 100%;
          background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(15%, #e1e1e1), color-stop(30%, transparent));
          background: linear-gradient(to right, transparent 0, #e1e1e1 15%, transparent 30%);
          -webkit-animation-duration: 1.5s;
          animation-duration: 1.5s;
          -webkit-animation-fill-mode: forwards;
          animation-fill-mode: forwards;
          -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
          -webkit-animation-name: vueContentPlaceholdersAnimation;
          animation-name: vueContentPlaceholdersAnimation;
          -webkit-animation-timing-function: linear;
          animation-timing-function: linear
      }

      .vue-content-placeholders-heading__subtitle {
          position: relative;
          overflow: hidden;
          height: 15px;
          background: #eee;
          width: 90%
      }

      .vue-content-placeholders-is-rounded .vue-content-placeholders-heading__subtitle {
          border-radius: 6px
      }

      .vue-content-placeholders-is-centered .vue-content-placeholders-heading__subtitle {
          margin-left: auto;
          margin-right: auto
      }

      .vue-content-placeholders-is-animated .vue-content-placeholders-heading__subtitle::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          max-width: 1000px;
          height: 100%;
          background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(15%, #e1e1e1), color-stop(30%, transparent));
          background: linear-gradient(to right, transparent 0, #e1e1e1 15%, transparent 30%);
          -webkit-animation-duration: 1.5s;
          animation-duration: 1.5s;
          -webkit-animation-fill-mode: forwards;
          animation-fill-mode: forwards;
          -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
          -webkit-animation-name: vueContentPlaceholdersAnimation;
          animation-name: vueContentPlaceholdersAnimation;
          -webkit-animation-timing-function: linear;
          animation-timing-function: linear
      }

      [class^=vue-content-placeholders-] + .vue-content-placeholders-text {
          margin-top: 20px
      }

      .vue-content-placeholders-text__line {
          position: relative;
          overflow: hidden;
          height: 15px;
          background: #eee;
          width: 100%;
          margin-bottom: 10px
      }

      .vue-content-placeholders-is-rounded .vue-content-placeholders-text__line {
          border-radius: 6px
      }

      .vue-content-placeholders-is-centered .vue-content-placeholders-text__line {
          margin-left: auto;
          margin-right: auto
      }

      .vue-content-placeholders-is-animated .vue-content-placeholders-text__line::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          max-width: 1000px;
          height: 100%;
          background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(15%, #e1e1e1), color-stop(30%, transparent));
          background: linear-gradient(to right, transparent 0, #e1e1e1 15%, transparent 30%);
          -webkit-animation-duration: 1.5s;
          animation-duration: 1.5s;
          -webkit-animation-fill-mode: forwards;
          animation-fill-mode: forwards;
          -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
          -webkit-animation-name: vueContentPlaceholdersAnimation;
          animation-name: vueContentPlaceholdersAnimation;
          -webkit-animation-timing-function: linear;
          animation-timing-function: linear
      }

      .vue-content-placeholders-text__line:nth-child(4n+1) {
          width: 80%
      }

      .vue-content-placeholders-text__line:nth-child(4n+2) {
          width: 100%
      }

      .vue-content-placeholders-text__line:nth-child(4n+3) {
          width: 70%
      }

      .vue-content-placeholders-text__line:nth-child(4n+4) {
          width: 85%
      }

      .vue-content-placeholders-img {
          position: relative;
          overflow: hidden;
          height: 15px;
          background: #eee;
          width: 100%;
          height: 120px
      }

      .vue-content-placeholders-is-rounded .vue-content-placeholders-img {
          border-radius: 6px
      }

      .vue-content-placeholders-is-centered .vue-content-placeholders-img {
          margin-left: auto;
          margin-right: auto
      }

      .vue-content-placeholders-is-animated .vue-content-placeholders-img::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100vw;
          max-width: 1000px;
          height: 100%;
          background: -webkit-gradient(linear, left top, right top, from(transparent), color-stop(15%, #e1e1e1), color-stop(30%, transparent));
          background: linear-gradient(to right, transparent 0, #e1e1e1 15%, transparent 30%);
          -webkit-animation-duration: 1.5s;
          animation-duration: 1.5s;
          -webkit-animation-fill-mode: forwards;
          animation-fill-mode: forwards;
          -webkit-animation-iteration-count: infinite;
          animation-iteration-count: infinite;
          -webkit-animation-name: vueContentPlaceholdersAnimation;
          animation-name: vueContentPlaceholdersAnimation;
          -webkit-animation-timing-function: linear;
          animation-timing-function: linear
      }

      [class^=vue-content-placeholders-] + .vue-content-placeholders-img {
          margin-top: 20px
      }
  </style>
  <link rel="stylesheet" href="{% static 'css/search-new.min90ca.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/normalize.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/ion.rangeSlider.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/ion.rangeSlider.skinFlat.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/pop-up.min.css' %}"/>
  {% include 'listings/_vueTemplate.html' %}
{% endblock %}

{% block content %}
  <!-- Search menu -->
  {% include 'partials/_menuSearch.html' %}

  <input id="elInitSearchPage" type="hidden" value="true"/>

  <div class="banner-app-tgnp" id="tgnp-banner-prompt" style="display: none">
    <div class="banner-app-content">
      <button onclick="AppPrompt.closePrompt()" class="close-banner-app">
        <i class="zmdi zmdi-close"></i>
      </button>
      <a href="javascript:void(0)" class="cover">
        <img src="{% static 'img/logo.svg' %}" alt="Thế giới Nhà Phố">
      </a>
      <div class="banner-app-info">
        <a href="javascript:void(0)">TGNP</a>
        <p>Mua bán nhà dễ dàng</p>
        <div class="rating-star">
          <i class="zmdi zmdi-star evaluated"></i>
          <i class="zmdi zmdi-star evaluated"></i>
          <i class="zmdi zmdi-star evaluated"></i>
          <i class="zmdi zmdi-star evaluated"></i>
          <i class="zmdi zmdi-star-half evaluated"></i>
        </div>
      </div>
    </div>
    <a href="javascript:void(0)" class="btn-install">Mở</a>
  </div>

  <div id="search-content" class="block-search-noresult page--search" v-cloak>
    <div class="search-container">
      <div class="search-result" style="z-index: auto">
        <div id="leads" class="panel" style=" z-index: auto">
          {% include "listings/_searchFilterBar.html" %}
          {% include "listings/_searchResult.html" %}
        </div>

      </div>
      <contact-popup v-bind:show-contact-popup="showContactPopup"
                     v-bind:close-popup="closeContactProject"></contact-popup>
      <div class="search-map">
        <div class="map-container" id="search-map"></div>
      </div>
    </div>
  </div>


  <div>
    {% include "partials/_relativeDescription.html" %}
  </div>

{% endblock %}


{% block scripts %}
  {{ block.super }}
  <script type="text/javascript">
      var map;
      var markerData = [];
      var markers = [];
      var districts = [];
      {% for district in districts %}
          districts.push({
              code: '{{ district.code }}',
              text: '{{ district.name }}'
          })
      {% endfor %}

      // on:hover -> markers[index].setIcon(highlightedIcon());
      // on:hover -> markers[index].setIcon(normalIcon());

      function initialize() {
          if (window.initMap) {
              window.initMap();
          } else {
              setTimeout(initialize, 200);
          }
      }

      function normalIcon() {
          return {
              url: 'http://1.bp.blogspot.com/_GZzKwf6g1o8/S6xwK6CSghI/AAAAAAAAA98/_iA3r4Ehclk/s1600/marker-green.png'
          };
      }

      function highlightedIcon() {
          return {
              url: 'http://steeplemedia.com/images/markers/markerGreen.png'
          };
      }

      function callbackInitMap() {
          console.log('initilize map');
          initialize();
      }

  </script>
  <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
  <script src="{% static 'js/ion.rangeSlider.js' %}"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
          integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
          integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script async src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  {#  <script src="{% static 'js/jquery-ui.min90ca.js' %}"></script>#}

  {#        <script async defer src="{% static 'js/search-new-v2.min.js' %}"></script>#}
  {#  <script defer src="www.google.com/recaptcha/apib091.js?render=explicit"></script>#}


  {% if environment != 'development' %}
    <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAWKbev18w2O63PfjhgpyU6DWvL6G4DCCc&libraries=drawing,places,geometry&language=vi&callback=callbackInitMap">
    </script>
  {% endif %}
  <script src="{% static 'js/search.js' %}"></script>

  <script>
      {% comment %}window.fbAsyncInit = function () {
          FB.init({
              appId: '268342061639747',
              cookie: true,                     // Enable cookies to allow the server to access the session.
              xfbml: true,                     // Parse social plugins on this webpage.
              version: 'v8.0'           // Use this Graph API version for this call.
          });
      }{% endcomment %}
  </script>
  {#  <script defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>#}
  <script defer src="{% static 'js/login-popup-app.min90ca.js' %}"></script>
  <script defer src="{% static 'js/header-v2.min90ca.js' %}"></script>

{% endblock %}



